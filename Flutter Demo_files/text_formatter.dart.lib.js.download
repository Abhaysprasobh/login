// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.3.3 (stable) (Tue Mar 26 14:21:33 2024 +0000) on "windows_x64"
// Module: packages/flutter/src/services/text_formatter.dart
// Flags: newRuntimeTypes(true), soundNullSafety(true), enableAsserts(true)
define(['dart_sdk', 'packages/flutter/src/services/text_editing_delta.dart', 'packages/flutter/src/services/text_editing.dart', 'packages/characters/src/characters_impl.dart', 'packages/characters/src/extensions.dart'], (function load__packages__flutter__src__services__text_formatter_dart(dart_sdk, packages__flutter__src__services__text_editing_delta$46dart, packages__flutter__src__services__text_editing$46dart, packages__characters__src__characters_impl$46dart, packages__characters__src__extensions$46dart) {
  'use strict';
  const dart_rti = dart_sdk.dart_rti;
  const core = dart_sdk.core;
  const ui = dart_sdk.ui;
  const math = dart_sdk.math;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const text_input = packages__flutter__src__services__text_editing_delta$46dart.src__services__text_input;
  const text_editing = packages__flutter__src__services__text_editing$46dart.src__services__text_editing;
  const characters_impl = packages__characters__src__characters_impl$46dart.src__characters_impl;
  const extensions = packages__characters__src__extensions$46dart.src__extensions;
  var text_formatter = Object.create(dart.library);
  var $allMatches = dartx.allMatches;
  var $substring = dartx.substring;
  var $clamp = dartx.clamp;
  var $length = dartx.length;
  dart._checkModuleNullSafetyMode(true);
  dart._checkModuleRuntimeTypes(true);
  var T = {
    VoidToString: () => (T.VoidToString = dart.constFn(dart_rti.findType("core|String()")))(),
    ListOfMaxLengthEnforcement: () => (T.ListOfMaxLengthEnforcement = dart.constFn(dart_rti.findType("core|List<flutter__src__services__text_formatter|MaxLengthEnforcement>")))(),
    MaxLengthEnforcement: () => (T.MaxLengthEnforcement = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|MaxLengthEnforcement")))(),
    FnToTextInputFormatter: () => (T.FnToTextInputFormatter = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|TextInputFormatter(flutter__src__services__text_input|TextEditingValue(flutter__src__services__text_input|TextEditingValue,flutter__src__services__text_input|TextEditingValue))")))(),
    TextEditingValueAndTextEditingValueToTextEditingValue: () => (T.TextEditingValueAndTextEditingValueToTextEditingValue = dart.constFn(dart_rti.findType("flutter__src__services__text_input|TextEditingValue(flutter__src__services__text_input|TextEditingValue,flutter__src__services__text_input|TextEditingValue)")))(),
    TextRangeTo_MutableTextRangeN: () => (T.TextRangeTo_MutableTextRangeN = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|_MutableTextRange?(ui|TextRange)")))(),
    TextSelectionTo_MutableTextRangeN: () => (T.TextSelectionTo_MutableTextRangeN = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|_MutableTextRange?(flutter__src__services__text_editing|TextSelection)")))(),
    int: () => (T.int = dart.constFn(dart_rti.findType("core|int")))(),
    VoidToTextEditingValue: () => (T.VoidToTextEditingValue = dart.constFn(dart_rti.findType("flutter__src__services__text_input|TextEditingValue()")))(),
    TextEditingValue: () => (T.TextEditingValue = dart.constFn(dart_rti.findType("flutter__src__services__text_input|TextEditingValue")))(),
    StringBuffer: () => (T.StringBuffer = dart.constFn(dart_rti.findType("core|StringBuffer")))(),
    _MutableTextRangeN: () => (T._MutableTextRangeN = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|_MutableTextRange?")))(),
    bool: () => (T.bool = dart.constFn(dart_rti.findType("core|bool")))(),
    intToint: () => (T.intToint = dart.constFn(dart_rti.findType("core|int(core|int)")))(),
    boolAndintAndint__Tovoid: () => (T.boolAndintAndint__Tovoid = dart.constFn(dart_rti.findType("~(core|bool,core|int,core|int,flutter__src__services__text_formatter|_TextEditingValueAccumulator)")))(),
    Pattern: () => (T.Pattern = dart.constFn(dart_rti.findType("core|Pattern")))(),
    String: () => (T.String = dart.constFn(dart_rti.findType("core|String")))(),
    TextInputFormatter: () => (T.TextInputFormatter = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|TextInputFormatter")))(),
    TargetPlatformNToMaxLengthEnforcement: () => (T.TargetPlatformNToMaxLengthEnforcement = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|MaxLengthEnforcement([flutter__src__foundation__platform|TargetPlatform?])")))(),
    TextEditingValueAndintToTextEditingValue: () => (T.TextEditingValueAndintToTextEditingValue = dart.constFn(dart_rti.findType("flutter__src__services__text_input|TextEditingValue(flutter__src__services__text_input|TextEditingValue,core|int)")))(),
    intN: () => (T.intN = dart.constFn(dart_rti.findType("core|int?")))(),
    MaxLengthEnforcementN: () => (T.MaxLengthEnforcementN = dart.constFn(dart_rti.findType("flutter__src__services__text_formatter|MaxLengthEnforcement?")))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  dart.defineLazy(CT, {
    get C1() {
      return C[1] = dart.const(Object.setPrototypeOf({
        [_Enum__name]: "none",
        [_Enum_index]: 0
      }, text_formatter.MaxLengthEnforcement.prototype));
    },
    get C2() {
      return C[2] = dart.const(Object.setPrototypeOf({
        [_Enum__name]: "enforced",
        [_Enum_index]: 1
      }, text_formatter.MaxLengthEnforcement.prototype));
    },
    get C3() {
      return C[3] = dart.const(Object.setPrototypeOf({
        [_Enum__name]: "truncateAfterCompositionEnds",
        [_Enum_index]: 2
      }, text_formatter.MaxLengthEnforcement.prototype));
    },
    get C0() {
      return C[0] = dart.constList([C[1] || CT.C1, C[2] || CT.C2, C[3] || CT.C3], T.MaxLengthEnforcement());
    },
    get C5() {
      return C[5] = dart.const(Object.setPrototypeOf({
        [_Enum__name]: "downstream",
        [_Enum_index]: 1
      }, ui.TextAffinity.prototype));
    },
    get C4() {
      return C[4] = dart.const(Object.setPrototypeOf({
        [TextRange_end]: -1,
        [TextRange_start]: -1,
        [TextSelection_isDirectional]: false,
        [TextSelection_affinity]: C[5] || CT.C5,
        [TextSelection_extentOffset]: -1,
        [TextSelection_baseOffset]: -1
      }, text_editing.TextSelection.prototype));
    }
  }, false);
  var C = Array(6).fill(void 0);
  var I = [
    "package:flutter/src/services/text_formatter.dart",
    "dart:core",
    "package:flutter/src/services/text_input.dart",
    "file:///C:/src/flutter/packages/flutter/lib/src/services/text_formatter.dart"
  ];
  var _name = dart.privateName(core, "_name");
  var _enumToString = dart.privateName(core, "_enumToString");
  var _Enum__name = dart.privateName(core, "_Enum._name");
  var _Enum_index = dart.privateName(core, "_Enum.index");
  text_formatter.MaxLengthEnforcement = class MaxLengthEnforcement extends core._Enum {
    [_enumToString]() {
      return "MaxLengthEnforcement." + this[_name];
    }
  };
  (text_formatter.MaxLengthEnforcement.new = function(t$36$35index, t$36$35name) {
    dart.global.Object.getPrototypeOf(text_formatter.MaxLengthEnforcement).new.call(this, t$36$35index, t$36$35name);
    ;
  }).prototype = text_formatter.MaxLengthEnforcement.prototype;
  dart.addTypeTests(text_formatter.MaxLengthEnforcement);
  dart.addRtiResources(text_formatter.MaxLengthEnforcement, ["flutter__src__services__text_formatter|MaxLengthEnforcement"]);
  dart.addTypeCaches(text_formatter.MaxLengthEnforcement);
  dart.setMethodSignature(text_formatter.MaxLengthEnforcement, () => dart.global.Object.setPrototypeOf({[_enumToString]: T.VoidToString()}, dart.getMethods(dart.global.Object.getPrototypeOf(text_formatter.MaxLengthEnforcement))));
  dart.setLibraryUri(text_formatter.MaxLengthEnforcement, I[0]);
  dart.setStaticFieldSignature(text_formatter.MaxLengthEnforcement, () => ['values', 'none', 'enforced', 'truncateAfterCompositionEnds']);
  dart.defineLazy(text_formatter.MaxLengthEnforcement, {
    /*text_formatter.MaxLengthEnforcement.values*/get values() {
      return C[0] || CT.C0;
    },
    /*text_formatter.MaxLengthEnforcement.none*/get none() {
      return C[1] || CT.C1;
    },
    /*text_formatter.MaxLengthEnforcement.enforced*/get enforced() {
      return C[2] || CT.C2;
    },
    /*text_formatter.MaxLengthEnforcement.truncateAfterCompositionEnds*/get truncateAfterCompositionEnds() {
      return C[3] || CT.C3;
    }
  }, false);
  text_formatter.TextInputFormatter = class TextInputFormatter extends core.Object {
    static withFunction(formatFunction) {
      return new text_formatter._SimpleTextInputFormatter.new(formatFunction);
    }
  };
  (text_formatter.TextInputFormatter.new = function() {
    ;
  }).prototype = text_formatter.TextInputFormatter.prototype;
  dart.addTypeTests(text_formatter.TextInputFormatter);
  dart.addRtiResources(text_formatter.TextInputFormatter, ["flutter__src__services__text_formatter|TextInputFormatter"]);
  dart.addTypeCaches(text_formatter.TextInputFormatter);
  dart.setStaticMethodSignature(text_formatter.TextInputFormatter, () => ['withFunction']);
  dart.setLibraryUri(text_formatter.TextInputFormatter, I[0]);
  text_formatter._SimpleTextInputFormatter = class _SimpleTextInputFormatter extends text_formatter.TextInputFormatter {
    static ['_#new#tearOff'](formatFunction) {
      return new text_formatter._SimpleTextInputFormatter.new(formatFunction);
    }
    formatEditUpdate(oldValue, newValue) {
      let t$363, t$362;
      t$362 = oldValue;
      t$363 = newValue;
      return this.formatFunction(t$362, t$363);
    }
  };
  (text_formatter._SimpleTextInputFormatter.new = function(formatFunction) {
    this.formatFunction = formatFunction;
    dart.global.Object.getPrototypeOf(text_formatter._SimpleTextInputFormatter).new.call(this);
    ;
  }).prototype = text_formatter._SimpleTextInputFormatter.prototype;
  dart.addTypeTests(text_formatter._SimpleTextInputFormatter);
  dart.addRtiResources(text_formatter._SimpleTextInputFormatter, ["flutter__src__services__text_formatter|_SimpleTextInputFormatter"]);
  dart.addTypeCaches(text_formatter._SimpleTextInputFormatter);
  dart.setMethodSignature(text_formatter._SimpleTextInputFormatter, () => dart.global.Object.setPrototypeOf({formatEditUpdate: T.TextEditingValueAndTextEditingValueToTextEditingValue()}, dart.getMethods(dart.global.Object.getPrototypeOf(text_formatter._SimpleTextInputFormatter))));
  dart.setLibraryUri(text_formatter._SimpleTextInputFormatter, I[0]);
  dart.setFieldSignature(text_formatter._SimpleTextInputFormatter, () => dart.global.Object.setPrototypeOf({formatFunction: {type: T.TextEditingValueAndTextEditingValueToTextEditingValue(), isConst: false, isFinal: true}}, dart.getFields(dart.global.Object.getPrototypeOf(text_formatter._SimpleTextInputFormatter))));
  text_formatter._MutableTextRange = class _MutableTextRange extends core.Object {
    static ['_#new#tearOff'](base, extent) {
      return new text_formatter._MutableTextRange.new(base, extent);
    }
    static fromComposingRange(range) {
      return range.isValid && !range.isCollapsed ? new text_formatter._MutableTextRange.new(range.start, range.end) : null;
    }
    static fromTextSelection(selection) {
      return selection.isValid ? new text_formatter._MutableTextRange.new(selection.baseOffset, selection.extentOffset) : null;
    }
  };
  (text_formatter._MutableTextRange.new = function(base, extent) {
    this.base = base;
    this.extent = extent;
    ;
  }).prototype = text_formatter._MutableTextRange.prototype;
  dart.addTypeTests(text_formatter._MutableTextRange);
  dart.addRtiResources(text_formatter._MutableTextRange, ["flutter__src__services__text_formatter|_MutableTextRange"]);
  dart.addTypeCaches(text_formatter._MutableTextRange);
  dart.setStaticMethodSignature(text_formatter._MutableTextRange, () => ['fromComposingRange', 'fromTextSelection']);
  dart.setLibraryUri(text_formatter._MutableTextRange, I[0]);
  dart.setFieldSignature(text_formatter._MutableTextRange, () => dart.global.Object.setPrototypeOf({
    base: {type: T.int(), isConst: false, isFinal: false, libraryUri: I[1]},
    extent: {type: T.int(), isConst: false, isFinal: false, libraryUri: I[1]}
  }, dart.getFields(dart.global.Object.getPrototypeOf(text_formatter._MutableTextRange))));
  var TextRange_end = dart.privateName(ui, "TextRange.end");
  var TextRange_start = dart.privateName(ui, "TextRange.start");
  var TextSelection_isDirectional = dart.privateName(text_editing, "TextSelection.isDirectional");
  var TextSelection_affinity = dart.privateName(text_editing, "TextSelection.affinity");
  var TextSelection_extentOffset = dart.privateName(text_editing, "TextSelection.extentOffset");
  var TextSelection_baseOffset = dart.privateName(text_editing, "TextSelection.baseOffset");
  text_formatter._TextEditingValueAccumulator = class _TextEditingValueAccumulator extends core.Object {
    static ['_#new#tearOff'](inputValue) {
      return new text_formatter._TextEditingValueAccumulator.new(inputValue);
    }
    finalize() {
      this.debugFinalized = true;
      let selection = this.selection;
      let composingRegion = this.composingRegion;
      return new text_input.TextEditingValue.new({text: dart.toString(this.stringBuffer), composing: composingRegion == null || composingRegion.base === composingRegion.extent ? ui.TextRange.empty : new ui.TextRange.new({start: composingRegion.base, end: composingRegion.extent}), selection: selection == null ? C[4] || CT.C4 : new text_editing.TextSelection.new({baseOffset: selection.base, extentOffset: selection.extent, affinity: this.inputValue.selection.affinity, isDirectional: this.inputValue.selection.isDirectional})});
    }
  };
  (text_formatter._TextEditingValueAccumulator.new = function(inputValue) {
    this.stringBuffer = new core.StringBuffer.new();
    this.debugFinalized = false;
    this.inputValue = inputValue;
    this.selection = text_formatter._MutableTextRange.fromTextSelection(inputValue.selection);
    this.composingRegion = text_formatter._MutableTextRange.fromComposingRange(inputValue.composing);
    ;
  }).prototype = text_formatter._TextEditingValueAccumulator.prototype;
  dart.addTypeTests(text_formatter._TextEditingValueAccumulator);
  dart.addRtiResources(text_formatter._TextEditingValueAccumulator, ["flutter__src__services__text_formatter|_TextEditingValueAccumulator"]);
  dart.addTypeCaches(text_formatter._TextEditingValueAccumulator);
  dart.setMethodSignature(text_formatter._TextEditingValueAccumulator, () => dart.global.Object.setPrototypeOf({finalize: T.VoidToTextEditingValue()}, dart.getMethods(dart.global.Object.getPrototypeOf(text_formatter._TextEditingValueAccumulator))));
  dart.setLibraryUri(text_formatter._TextEditingValueAccumulator, I[0]);
  dart.setFieldSignature(text_formatter._TextEditingValueAccumulator, () => dart.global.Object.setPrototypeOf({
    inputValue: {type: T.TextEditingValue(), isConst: false, isFinal: true, libraryUri: I[2]},
    stringBuffer: {type: T.StringBuffer(), isConst: false, isFinal: true, libraryUri: I[1]},
    selection: {type: T._MutableTextRangeN(), isConst: false, isFinal: true, libraryUri: I[0]},
    composingRegion: {type: T._MutableTextRangeN(), isConst: false, isFinal: true, libraryUri: I[0]},
    debugFinalized: {type: T.bool(), isConst: false, isFinal: false, libraryUri: I[1]}
  }, dart.getFields(dart.global.Object.getPrototypeOf(text_formatter._TextEditingValueAccumulator))));
  var filterPattern$ = dart.privateName(text_formatter, "FilteringTextInputFormatter.filterPattern");
  var allow$ = dart.privateName(text_formatter, "FilteringTextInputFormatter.allow");
  var replacementString$ = dart.privateName(text_formatter, "FilteringTextInputFormatter.replacementString");
  var _processRegion = dart.privateName(text_formatter, "_processRegion");
  text_formatter.FilteringTextInputFormatter = class FilteringTextInputFormatter extends text_formatter.TextInputFormatter {
    get filterPattern() {
      return this[filterPattern$];
    }
    set filterPattern(value) {
      super.filterPattern = value;
    }
    get allow() {
      return this[allow$];
    }
    set allow(value) {
      super.allow = value;
    }
    get replacementString() {
      return this[replacementString$];
    }
    set replacementString(value) {
      super.replacementString = value;
    }
    static ['_#new#tearOff'](filterPattern, opts) {
      let allow = opts && 'allow' in opts ? opts.allow : null;
      let replacementString = opts && 'replacementString' in opts ? opts.replacementString : "";
      return new text_formatter.FilteringTextInputFormatter.new(filterPattern, {allow: allow, replacementString: replacementString});
    }
    static ['_#allow#tearOff'](filterPattern, opts) {
      let replacementString = opts && 'replacementString' in opts ? opts.replacementString : "";
      return new text_formatter.FilteringTextInputFormatter.allow(filterPattern, {replacementString: replacementString});
    }
    static ['_#deny#tearOff'](filterPattern, opts) {
      let replacementString = opts && 'replacementString' in opts ? opts.replacementString : "";
      return new text_formatter.FilteringTextInputFormatter.deny(filterPattern, {replacementString: replacementString});
    }
    formatEditUpdate(oldValue, newValue) {
      let t$362, t$362$, t$362$0, t$362$1;
      let formatState = new text_formatter._TextEditingValueAccumulator.new(newValue);
      if (!!formatState.debugFinalized) dart.assertFailed(null, I[3], 378, 12, "!formatState.debugFinalized");
      let matches = this.filterPattern[$allMatches](newValue.text);
      let previousMatch = null;
      for (let match of matches) {
        if (!(match.end >= match.start)) dart.assertFailed(null, I[3], 383, 14, "match.end >= match.start");
        this[_processRegion](this.allow, (t$362$ = (t$362 = previousMatch, t$362 == null ? null : t$362.end), t$362$ == null ? 0 : t$362$), match.start, formatState);
        if (!!formatState.debugFinalized) dart.assertFailed(null, I[3], 390, 14, "!formatState.debugFinalized");
        this[_processRegion](!this.allow, match.start, match.end, formatState);
        if (!!formatState.debugFinalized) dart.assertFailed(null, I[3], 393, 14, "!formatState.debugFinalized");
        previousMatch = match;
      }
      this[_processRegion](this.allow, (t$362$1 = (t$362$0 = previousMatch, t$362$0 == null ? null : t$362$0.end), t$362$1 == null ? 0 : t$362$1), newValue.text.length, formatState);
      if (!!formatState.debugFinalized) dart.assertFailed(null, I[3], 401, 12, "!formatState.debugFinalized");
      return formatState.finalize();
    }
    [_processRegion](isBannedRegion, regionStart, regionEnd, state) {
      let t$362, t$362$, t$362$0, t$362$1;
      let replacementString = isBannedRegion ? regionStart === regionEnd ? "" : this.replacementString : state.inputValue.text[$substring](regionStart, regionEnd);
      state.stringBuffer.write(replacementString);
      if (replacementString.length === regionEnd - regionStart) {
        return;
      }
      function adjustIndex(originalIndex) {
        let replacedLength = originalIndex <= regionStart && originalIndex < regionEnd ? 0 : replacementString.length;
        let removedLength = originalIndex[$clamp](regionStart, regionEnd) - regionStart;
        return replacedLength - removedLength;
      }
      dart.fn(adjustIndex, T.intToint());
      t$362 = state.selection;
      t$362 == null ? null : t$362.base = t$362.base + adjustIndex(state.inputValue.selection.baseOffset);
      t$362$ = state.selection;
      t$362$ == null ? null : t$362$.extent = t$362$.extent + adjustIndex(state.inputValue.selection.extentOffset);
      t$362$0 = state.composingRegion;
      t$362$0 == null ? null : t$362$0.base = t$362$0.base + adjustIndex(state.inputValue.composing.start);
      t$362$1 = state.composingRegion;
      t$362$1 == null ? null : t$362$1.extent = t$362$1.extent + adjustIndex(state.inputValue.composing.end);
    }
  };
  (text_formatter.FilteringTextInputFormatter.new = function(filterPattern, opts) {
    let allow = opts && 'allow' in opts ? opts.allow : null;
    let replacementString = opts && 'replacementString' in opts ? opts.replacementString : "";
    this[filterPattern$] = filterPattern;
    this[allow$] = allow;
    this[replacementString$] = replacementString;
    dart.global.Object.getPrototypeOf(text_formatter.FilteringTextInputFormatter).new.call(this);
    ;
  }).prototype = text_formatter.FilteringTextInputFormatter.prototype;
  (text_formatter.FilteringTextInputFormatter.allow = function(filterPattern, opts) {
    let replacementString = opts && 'replacementString' in opts ? opts.replacementString : "";
    text_formatter.FilteringTextInputFormatter.new.call(this, filterPattern, {allow: true, replacementString: replacementString});
  }).prototype = text_formatter.FilteringTextInputFormatter.prototype;
  (text_formatter.FilteringTextInputFormatter.deny = function(filterPattern, opts) {
    let replacementString = opts && 'replacementString' in opts ? opts.replacementString : "";
    text_formatter.FilteringTextInputFormatter.new.call(this, filterPattern, {allow: false, replacementString: replacementString});
  }).prototype = text_formatter.FilteringTextInputFormatter.prototype;
  dart.addTypeTests(text_formatter.FilteringTextInputFormatter);
  dart.addRtiResources(text_formatter.FilteringTextInputFormatter, ["flutter__src__services__text_formatter|FilteringTextInputFormatter"]);
  dart.addTypeCaches(text_formatter.FilteringTextInputFormatter);
  dart.setMethodSignature(text_formatter.FilteringTextInputFormatter, () => dart.global.Object.setPrototypeOf({
    formatEditUpdate: T.TextEditingValueAndTextEditingValueToTextEditingValue(),
    [_processRegion]: T.boolAndintAndint__Tovoid()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(text_formatter.FilteringTextInputFormatter))));
  dart.setLibraryUri(text_formatter.FilteringTextInputFormatter, I[0]);
  dart.setFieldSignature(text_formatter.FilteringTextInputFormatter, () => dart.global.Object.setPrototypeOf({
    filterPattern: {type: T.Pattern(), isConst: false, isFinal: true, libraryUri: I[1]},
    allow: {type: T.bool(), isConst: false, isFinal: true, libraryUri: I[1]},
    replacementString: {type: T.String(), isConst: false, isFinal: true, libraryUri: I[1]}
  }, dart.getFields(dart.global.Object.getPrototypeOf(text_formatter.FilteringTextInputFormatter))));
  dart.setStaticFieldSignature(text_formatter.FilteringTextInputFormatter, () => ['singleLineFormatter', 'digitsOnly']);
  dart.defineLazy(text_formatter.FilteringTextInputFormatter, {
    /*text_formatter.FilteringTextInputFormatter.singleLineFormatter*/get singleLineFormatter() {
      return new text_formatter.FilteringTextInputFormatter.deny("\n");
    },
    /*text_formatter.FilteringTextInputFormatter.digitsOnly*/get digitsOnly() {
      return new text_formatter.FilteringTextInputFormatter.allow(core.RegExp.new("[0-9]"));
    }
  }, false);
  var maxLength$ = dart.privateName(text_formatter, "LengthLimitingTextInputFormatter.maxLength");
  var maxLengthEnforcement$ = dart.privateName(text_formatter, "LengthLimitingTextInputFormatter.maxLengthEnforcement");
  text_formatter.LengthLimitingTextInputFormatter = class LengthLimitingTextInputFormatter extends text_formatter.TextInputFormatter {
    get maxLength() {
      return this[maxLength$];
    }
    set maxLength(value) {
      super.maxLength = value;
    }
    get maxLengthEnforcement() {
      return this[maxLengthEnforcement$];
    }
    set maxLengthEnforcement(value) {
      super.maxLengthEnforcement = value;
    }
    static ['_#new#tearOff'](maxLength, opts) {
      let maxLengthEnforcement = opts && 'maxLengthEnforcement' in opts ? opts.maxLengthEnforcement : null;
      return new text_formatter.LengthLimitingTextInputFormatter.new(maxLength, {maxLengthEnforcement: maxLengthEnforcement});
    }
    static getDefaultMaxLengthEnforcement(platform = null) {
      {
        return text_formatter.MaxLengthEnforcement.truncateAfterCompositionEnds;
      }
    }
    static truncate(value, maxLength) {
      let iterator = new characters_impl.StringCharacterRange.new(value.text);
      if (extensions['StringCharacters|get#characters'](value.text)[$length] > maxLength) {
        iterator.expandNext(maxLength);
      }
      let truncated = iterator.current;
      return new text_input.TextEditingValue.new({text: truncated, selection: value.selection.copyWith({baseOffset: math.min(T.int(), value.selection.start, truncated.length), extentOffset: math.min(T.int(), value.selection.end, truncated.length)}), composing: !value.composing.isCollapsed && truncated.length > value.composing.start ? new ui.TextRange.new({start: value.composing.start, end: math.min(T.int(), value.composing.end, truncated.length)}) : ui.TextRange.empty});
    }
    formatEditUpdate(oldValue, newValue) {
      let t$362;
      let maxLength = this.maxLength;
      if (maxLength == null || maxLength === -1 || extensions['StringCharacters|get#characters'](newValue.text)[$length] <= dart.notNull(maxLength)) {
        return newValue;
      }
      if (!(dart.notNull(maxLength) > 0)) dart.assertFailed(null, I[3], 588, 12, "maxLength > 0");
      switch (t$362 = this.maxLengthEnforcement, t$362 == null ? text_formatter.LengthLimitingTextInputFormatter.getDefaultMaxLengthEnforcement() : t$362) {
        case C[1] || CT.C1:
          {
            return newValue;
          }
        case C[2] || CT.C2:
          {
            if (extensions['StringCharacters|get#characters'](oldValue.text)[$length] === maxLength && oldValue.selection.isCollapsed) {
              return oldValue;
            }
            return text_formatter.LengthLimitingTextInputFormatter.truncate(newValue, maxLength);
          }
        case C[3] || CT.C3:
          {
            if (extensions['StringCharacters|get#characters'](oldValue.text)[$length] === maxLength && !oldValue.composing.isValid) {
              return oldValue;
            }
            if (newValue.composing.isValid) {
              return newValue;
            }
            return text_formatter.LengthLimitingTextInputFormatter.truncate(newValue, maxLength);
          }
      }
    }
  };
  (text_formatter.LengthLimitingTextInputFormatter.new = function(maxLength, opts) {
    let maxLengthEnforcement = opts && 'maxLengthEnforcement' in opts ? opts.maxLengthEnforcement : null;
    this[maxLength$] = maxLength;
    this[maxLengthEnforcement$] = maxLengthEnforcement;
    if (!(maxLength == null || maxLength === -1 || dart.notNull(maxLength) > 0)) dart.assertFailed(null, I[3], 462, 15, "maxLength == null || maxLength == -1 || maxLength > 0");
    dart.global.Object.getPrototypeOf(text_formatter.LengthLimitingTextInputFormatter).new.call(this);
    ;
  }).prototype = text_formatter.LengthLimitingTextInputFormatter.prototype;
  dart.addTypeTests(text_formatter.LengthLimitingTextInputFormatter);
  dart.addRtiResources(text_formatter.LengthLimitingTextInputFormatter, ["flutter__src__services__text_formatter|LengthLimitingTextInputFormatter"]);
  dart.addTypeCaches(text_formatter.LengthLimitingTextInputFormatter);
  dart.setMethodSignature(text_formatter.LengthLimitingTextInputFormatter, () => dart.global.Object.setPrototypeOf({formatEditUpdate: T.TextEditingValueAndTextEditingValueToTextEditingValue()}, dart.getMethods(dart.global.Object.getPrototypeOf(text_formatter.LengthLimitingTextInputFormatter))));
  dart.setStaticMethodSignature(text_formatter.LengthLimitingTextInputFormatter, () => ['getDefaultMaxLengthEnforcement', 'truncate']);
  dart.setLibraryUri(text_formatter.LengthLimitingTextInputFormatter, I[0]);
  dart.setFieldSignature(text_formatter.LengthLimitingTextInputFormatter, () => dart.global.Object.setPrototypeOf({
    maxLength: {type: T.intN(), isConst: false, isFinal: true, libraryUri: I[1]},
    maxLengthEnforcement: {type: T.MaxLengthEnforcementN(), isConst: false, isFinal: true, libraryUri: I[0]}
  }, dart.getFields(dart.global.Object.getPrototypeOf(text_formatter.LengthLimitingTextInputFormatter))));
  dart.moduleConstCaches.set("packages/flutter/src/services/text_formatter.dart", C);
  dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"core|String":{"Comparable.T":"core|String","core|Comparable":["core|String"],"core|Pattern":[]},"core|Comparable":{"Comparable.T":"1"},"core|List":{"List.E":"1","Iterable.E":"1","core|Iterable":["1"],"_ListIterable.E":"1","core|_ListIterable":["1"],"EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"]},"core|Iterable":{"Iterable.E":"1"},"core|_ListIterable":{"_ListIterable.E":"1","EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"],"Iterable.E":"1","core|Iterable":["1"]},"_internal|EfficientLengthIterable":{"EfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"_internal|HideEfficientLengthIterable":{"HideEfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"flutter__src__services__text_formatter|MaxLengthEnforcement":{"core|_Enum":[],"core|Enum":[]},"core|_Enum":{"core|Enum":[]},"flutter__src__services__text_editing|TextSelection":{"ui|TextRange":[]},"core|int":{"core|num":[],"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|num":{"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|StringBuffer":{"core|StringSink":[]},"flutter__src__foundation__platform|TargetPlatform":{"core|_Enum":[],"core|Enum":[]},"flutter__src__services__text_formatter|_SimpleTextInputFormatter":{"flutter__src__services__text_formatter|TextInputFormatter":[]},"flutter__src__services__text_formatter|FilteringTextInputFormatter":{"flutter__src__services__text_formatter|TextInputFormatter":[]},"flutter__src__services__text_formatter|LengthLimitingTextInputFormatter":{"flutter__src__services__text_formatter|TextInputFormatter":[]}}'));
  dart.trackLibraries("packages/flutter/src/services/text_formatter.dart", {
    "package:flutter/src/services/text_formatter.dart": text_formatter
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["text_formatter.dart"],"names":[],"mappings":"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","file":"../../../../../../../../F:/packages/flutter/src/services/text_formatter.dart.lib.js"}');
  // Exports:
  return {
    src__services__text_formatter: text_formatter
  };
}));

//# sourceMappingURL=text_formatter.dart.lib.js.map
